document.addEventListener("DOMContentLoaded", function() {
    // Initialize the map centered over India (adjust coordinates and zoom as needed)
    var map = L.map('vulnerabilityMap').setView([22, 80], 5);
  
    // Add a base tile layer from OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
  
    // Define vulnerability hotspots (you can extend this list as needed)
    // Each object includes a state/region, coordinates, and a brief description.
    var hotspots = [
      {
        state: "Maharashtra",
        coords: [19.7515, 75.7139],
        description: "Significant shifts in temperature and reduced rainfall affecting agricultural yields. Frequent drought conditions have been reported."
      },
      {
        state: "Tamil Nadu",
        coords: [11.1271, 78.6569],
        description: "Irregular monsoon patterns and increasing heat stress have led to water scarcity and crop stress in several districts."
      },
      {
        state: "Northeast India",
        coords: [26.2006, 92.9376],
        description: "Extreme variability in rainfall with higher incidence of floods and droughts. The region is highly vulnerable due to its fragile ecosystem."
      }
    ];
  
    // Loop through the hotspots array and add a marker for each hotspot
    hotspots.forEach(function(hotspot) {
      var marker = L.marker(hotspot.coords).addTo(map);
      marker.bindPopup(
        `<strong>${hotspot.state}</strong><br>${hotspot.description}<br>
         <a href="analysis.html?state=${encodeURIComponent(hotspot.state)}" target="_blank">View Detailed Analysis</a>`
      );
    });
  });
  